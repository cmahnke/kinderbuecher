<section class="list">
  {{- partial "header" . -}}
  {{- $pager := . -}}

  <div class="container">
    <div class="content">
        {{ $paginator := .Paginate (where (where .Site.Pages "Type" "post").ByDate.Reverse "IsPage" true) }}
        {{ range $index, $element := .Paginator.Pages }}

        {{/* Preview */}}
        {{- $context := path.Dir .File.Path -}}

        {{- $defaultWidth := 400 -}}
        {{- $previewImg := (.Resources.ByType "image").GetMatch "front" -}}

        {{- if eq $previewImg nil -}}
            {{- errorf "Can't find image 'front' for %s" $context -}}
        {{- end -}}

        {{- $class := "" -}}
        {{- $style := "" -}}
        {{- if $previewImg -}}
            {{- $style = printf "background-image: url(%s);" $previewImg.RelPermalink -}}
            {{- $class = "preview" -}}
        {{- end -}}





      {{ if eq (mod $index 2) 0 }}
      {{- end -}}

        <article class="summary">
          <div class="{{ $class }}" style="{{ $style | safeCSS }}"></div>
          <header class="header">
            {{- partial "banner" (dict "Page" . "page_href" .RelPermalink) }}

            <div class="header__metadata inline-list">
              {{- partial "date.html" (dict "date" .Date "language" $.Page.Language "months" $.Site.Data.months) -}}


              <div class="header__categories">
                {{- partial "taxonomies" (dict "Page" . "term" "categories") }}
              </div>
            </div>

            <h2 class="header__title">
              <a href="{{ .RelPermalink }}">{{ .Title }}</a>
            </h2>
          </header>

          {{- with .Summary }}
            <div class="summary__content">{{ . }}</div>
          {{- end }}
           <div class="ruler"></div>
        </article>



    {{- end }}
    </div>

    <div class="metadata pagination-container">
      {{ template "_internal/pagination.html" .Page }}
    </div>
  </div>
</section>
